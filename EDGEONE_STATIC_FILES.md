# EdgeOne 静态文件部署问题

## 问题描述

部署后可以打开页面，但是没有视频和一些图片内容。

## 原因分析

1. **上传文件未部署**: `/public/uploads` 目录被 `.gitignore` 排除，上传的文件不会被提交到 git
2. **EdgeOne 部署**: EdgeOne 从 git 仓库构建，因此上传的文件不存在
3. **静态资源路径**: 代码中使用相对路径 `/uploads/...`，但文件不存在时无法加载

## 解决方案

### 方案 1: 使用外部存储（推荐）

将上传的文件存储到腾讯云 COS（对象存储）或其他云存储服务：

1. **创建 COS 存储桶**
2. **修改上传 API**，将文件上传到 COS
3. **修改图片/视频路径**，使用 COS 的 URL

### 方案 2: 确保静态文件被部署

如果必须使用本地文件系统：

1. **移除 `.gitignore` 中的 `/public/uploads`**（不推荐，会导致仓库变大）
2. **或者使用 EdgeOne 的文件上传功能**，在部署后手动上传文件

### 方案 3: 使用默认占位图

在代码中添加检查，如果文件不存在，使用默认图片：

```typescript
// 检查文件是否存在，如果不存在使用默认图片
const imageUrl = product.image || "/default-product.png";
```

## 当前配置

- `next.config.js` 中已设置 `unoptimized: true`，避免图片优化问题
- 图片组件已设置 `unoptimized={true}`

## 建议

**最佳实践**: 使用腾讯云 COS 存储上传的文件，这样可以：
- 文件独立于代码仓库
- 支持 CDN 加速
- 更好的可扩展性
- 符合腾讯云部署要求

## 临时解决方案

如果需要快速修复，可以：

1. 在 EdgeOne 项目设置中，添加静态文件目录配置
2. 或者将上传的文件手动上传到 EdgeOne 的静态资源目录




